<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RegExp object 연습</title>
    <script>
        function check(f){
            var emailpattern = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            var emailflag = emailpattern.test(f.email.value.trim());
            //console.log(flag);
            if(emailflag){
                document.querySelector('#emailspan').innerHTML=
                "<span style='color:green'>Email 형식에 맞습니다.</span>";
            }else{
                document.querySelector('#emailspan').innerHTML=
                "<span style='color:red; font-weight:900'>Email 형식에 맞지 않습니다.</span>";
            }
            var zipcodepattern = /^\d{5}$/;
            var zipcodeflag = zipcodepattern.test(f.zipcode.value.trim());
            if(zipcodeflag){
                document.querySelector('#zipcodespan').innerHTML=
                "<span style='color:green'>우편번호 형식에 맞습니다.</span>";
            }else{
                document.querySelector('#zipcodespan').innerHTML=
                "<span style='color:red; font-weight:900'>우편번호 형식에 맞지 않습니다.</span>";
            }
            
            var hppattern = /^01\d-\d{3,4}-\d{4}$/;
            var hpflag = hppattern.test(f.hp.value.trim());

            if(hpflag){
                document.querySelector('#hpspan').innerHTML=
                "<span style='color:green'>핸드폰 형식에 맞습니다.</span>";
            }else{
                document.querySelector('#hpspan').innerHTML=
                "<span style='color:red; font-weight:900'>핸드폰 형식에 맞지 않습니다.</span>";
            }

            if(emailflag && zipcodeflag && hpflag){ // 모두 제대로 넣었다면
                f.action = 'test.jsp';
                f.method = 'get';
                f.submit();
            }else{ // 한개라도 잘못 넣었다면
                alert("잘못 입력하신 항목이 있습니다. \n확인 후 다시 입력해주세요.");
            }
        }
    </script>   
</head>
<body>
    <form>
        Email : <input type="email" name="email">(예:a@a.com)<span id="emailspan"></span><br />
        Zipcode : <input type="number" name="zipcode">(예:12345)<span id="zipcodespan"></span><br />
        H.P : <input type="tel" name="hp">(예:010-xxxx-xxxx)<span id="hpspan"></span><br />
        <input type="button" name="" value="전송" onclick="check(this.form)">

    </form>
</body>
</html>